<!DOCTYPE html>
<html>
<head>
    <title>Teste Webhook</title>
</head>
<body>
    <h1>Teste do Webhook</h1>
    <button onclick="testarWebhook()">Testar Envio</button>
    <div id="resultado"></div>

    <script>
        async function testarWebhook() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = 'Enviando...';

            const webhookPayload = {
                pedido: {
                    sessao_id: "teste123",
                    data_pedido: new Date().toISOString(),
                    status: "novo",
                    valor_total: 299.99
                },
                cliente: {
                    nome: "Jo√£o Teste",
                    telefone: "+5511999999999"
                },
                entrega: {
                    cep: "01234-567",
                    endereco: "Rua Teste",
                    numero: "123",
                    complemento: "Apto 1",
                    bairro: "Centro",
                    cidade: "S√£o Paulo",
                    estado: "SP"
                },
                pagamento: {
                    forma_pagamento: "PIX",
                    valor_total: 299.99
                },
                produtos: [{
                    id: "46240",
                    nome: "Produto Teste",
                    descricao: "Descri√ß√£o do produto",
                    preco_unitario: 299.99,
                    quantidade: 1,
                    subtotal: 299.99
                }]
            };

            try {
                console.log('üì§ Enviando payload:', webhookPayload);
                
                const response = await fetch('https://integra.devsible.com.br/webhook-test/env_pedido', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(webhookPayload)
                });

                if (response.ok) {
                    resultado.innerHTML = '‚úÖ Webhook enviado com sucesso!';
                    console.log('‚úÖ Sucesso:', await response.text());
                } else {
                    resultado.innerHTML = `‚ö†Ô∏è Erro: ${response.status} - ${response.statusText}`;
                    console.warn('‚ö†Ô∏è Erro:', response.status, await response.text());
                }
            } catch (error) {
                resultado.innerHTML = `‚ùå Erro: ${error.message}`;
                console.error('‚ùå Erro:', error);
            }
        }
    </script>
</body>
</html>